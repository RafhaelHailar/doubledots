<script src="../src/1_1_DoubleDots.js"></script>
<script src="../src/1_2_AttrCustom.js"></script>
<script src="../src/2_2_nativeMethods.js"></script>
<script src="../src/3_definition_registers_v4.js"></script>
<script src="../src/4_eventLoop_v2.js"></script>
<script src="../src/6_load_DoubleDots.js"></script>
<script src="../src/triggers/PropagationSimple.js"></script>

<form submit:getdata:validate:send:toast>
  <h1>Register on our plataform</h1>
  <label for="name">Name:</label><br />
  <input type="text" id="name" name="name" /><br />
  <label for="email">Email:</label><br />
  <input type="text" id="email" name="email" /><br />
  <label for="password">Password:</label><br />
  <input type="password" id="password" name="password" /><br />
  <label for="passwordconf">Confirm Password:</label><br />
  <input type="password" id="passwordconf" name="passwordconf" /><br />
  <input type="submit" value="Submit" />
</form>

<script>
  document.Reactions.define("getdata", function () {
    __eventLoop.getFrame().event.preventDefault();
    let data = new FormData(this.ownerElement);
    let jsonObject = {};

    for (let pair of data.entries()) {
      jsonObject[pair[0]] = pair[1];
    }

    return jsonObject;
  });
  document.Reactions.define("validate", function (data) {
    if (data.password !== data.passwordconf) {
      alert("Passwords do not match");
    } else {
      return data;
    }
  });
  document.Reactions.define("send", function (data) {
    // promise to send data that returns ok or error
  });
  document.Reactions.define("toast", function (data) {
    if (ok) {
      alert("Data sent successfully");
    } else {
      alert("Error sending data");
    }
  });
</script>

<script src="../src/1_1_DoubleDots.js"></script>
<script src="../src/1_2_AttrCustom.js"></script>
<script src="../src/2_2_nativeMethods.js"></script>
<script src="../src/3_definition_registers_v4.js"></script>
<script src="../src/4_eventLoop_v2.js"></script>
<script src="../src/6_load_DoubleDots.js"></script>
<script src="../src/triggers/PropagationSimple.js"></script>

<form submit:prevent:validate:add>
  <h1>Todo app</h1>
  <p>add elements with the input below, remove them with a click</p>
  <div>
    <input type="text" />
    <button type="submit">add</button>
  </div>
</form>
<div id="container">
  <p click:remove>Test todo 1</p>
</div>

<script>
  document.Reactions.define("prevent", function (e) {
    e.preventDefault();
  });
  document.Reactions.define("validate", function () {
    let input = this.ownerElement.querySelector("input");
    if (input.value === "") {
      alert("Please enter a value");
      return false;
    }
  });
  document.Reactions.define("add", function () {
    let input = this.ownerElement.querySelector("input");
    let container = this.ownerElement.nextElementSibling;
    let previous = container.innerHTML;
    container.innerHTML = previous + `<p click:remove>${input.value}</p>`;
    input.value = "";
  });

  document.Reactions.define("remove", function (e) {
    e.target.remove();
  });
</script>

{
  "version": 3,
  "sources": ["src/dd/strict_deprecation.js", "src/dd/ddStrict.js"],
  "sourcesContent": ["export function noPrimitiveConstructor(OG, name = OG.name) {\n  Object.defineProperty(window, name, {\n    value: function PrimitiveConstructor(...args) {\n      if (new.target)\n        throw new Error(`Replace \"new ${name}(...\" with \"${name}(...\".`);\n      return OG(...args);\n    },\n    enumerable: true, writable: true, configurable: true\n  });\n}\n\nexport function ShadowRootAlwaysOpen() {\n  const OG = HTMLElement.prototype.attachShadow;\n  HTMLElement.prototype.attachShadow = function attachShadowAlwaysOpen(opt = {}, ...args) {\n    opt.mode = \"open\";\n    return OG.call(this, opt, ...args);\n  };\n}\n\nexport const DoubleDotStrictMask = {\n  \"Element.prototype\": [\n    \"hasAttributeNS\",\n    \"getAttributeNS\",\n    \"setAttributeNS\",\n    \"removeAttributeNS\",\n    \"setAttributeNode\",\n    \"removeAttributeNode\",\n    \"getAttributeNodeNS\",\n    \"setAttributeNodeNS\",\n    //     \"outerHTML\"\n\n    //.setAttribute(name, value)\n    //.hasAttribute(name)\n    //.getAttribute(name)\n    //.getAttributeNode(name)\n    //.attributes\n  ],\n  \"Event.prototype\": [\n    \"stopPropagation\",\n    \"stopImmediatePropagation\"\n  ],\n  \"EventTarget.prototype\": [\n    \"addEventListener\",\n    \"removeEventListener\",\n    //.dispatchEvent\n  ],\n  \"window\": [\n    \"setTimeout\",\n    \"clearTimeout\",\n    \"setInterval\",\n    \"clearInterval\",\n    \"event\"\n    //must add \"async sleep(ms)\" first\n    //MutationObserver\n    //ResizeObserver\n    //IntersectionObserver\n  ],\n  \"Document.prototype\": [\n    \"createAttribute\",\n    \"createComment\",\n    \"createDocumentFragment\",\n    \"createElement\",\n    \"createTextNode\",\n    \"importNode\",\n    \"currentScript\",\n    \"write\",\n    // \"createRange\" //todo research\n  ],\n  \"Node.prototype\": [\n    \"cloneNode\"\n  ],\n  /*\n  \"HTMLElement.prototype\": {\n    adoptionCallback: problematicDeprecationMethod, needs to highJack the HTMLElement constructor actually.\n  }\n  */\n};\n\nfunction deprecated() {\n  throw new Error(\"Deprecated in DoubleDots strict.\");\n}\n\nexport function deprecate(mask, OGs = {}) {\n  for (let [path, methods] of Object.entries(mask)) {\n    path = path.split(\".\");\n    const obj = path.reduce((o, p) => o[p], window);\n    const OG = path.reduce((o, p) => o[p] ??= {}, OGs);\n    for (let prop of methods) {\n      const desc = Object.getOwnPropertyDescriptor(obj, prop);\n      desc.value ? desc.value = deprecated : desc.get = desc.get = deprecated;\n      Object.defineProperty(obj, prop, desc);\n      Object.defineProperty(OG, prop, desc);\n    }\n  }\n}\n", "import {\n  noPrimitiveConstructor,\n  ShadowRootAlwaysOpen,\n  DoubleDotStrictMask,\n  deprecate\n} from \"./strict_deprecation.js\";\n\n//DoubleDots doesn't treat objects made using new as primitives.\n//You can remove this restriction if you have a 3rd party library that\n//use such objects, and these libraries will still work ok.\n//But if you make stuff from scratch, \n//stay away from \"new String/Number/Boolean()\".\nnoPrimitiveConstructor(String);\nnoPrimitiveConstructor(Number);\nnoPrimitiveConstructor(Boolean);\n\n//DoubleDots MUST access full .composedPath for all events.\nShadowRootAlwaysOpen();\n\n//Deprecate lots of the native methods\ndeprecate(DoubleDotStrictMask, window.DoubleDots ??= {});"],
  "mappings": ";AAAO,SAAS,uBAAuB,IAAI,OAAO,GAAG,MAAM;AACzD,SAAO,eAAe,QAAQ,MAAM;AAAA,IAClC,OAAO,SAAS,wBAAwB,MAAM;AAC5C,UAAI;AACF,cAAM,IAAI,MAAM,gBAAgB,mBAAmB,YAAY;AACjE,aAAO,GAAG,GAAG,IAAI;AAAA,IACnB;AAAA,IACA,YAAY;AAAA,IAAM,UAAU;AAAA,IAAM,cAAc;AAAA,EAClD,CAAC;AACH;AAEO,SAAS,uBAAuB;AACrC,QAAM,KAAK,YAAY,UAAU;AACjC,cAAY,UAAU,eAAe,SAAS,uBAAuB,MAAM,CAAC,MAAM,MAAM;AACtF,QAAI,OAAO;AACX,WAAO,GAAG,KAAK,MAAM,KAAK,GAAG,IAAI;AAAA,EACnC;AACF;AAEO,IAAM,sBAAsB;AAAA,EACjC,qBAAqB;AAAA,IACnB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQF;AAAA,EACA,mBAAmB;AAAA,IACjB;AAAA,IACA;AAAA,EACF;AAAA,EACA,yBAAyB;AAAA,IACvB;AAAA,IACA;AAAA;AAAA,EAEF;AAAA,EACA,UAAU;AAAA,IACR;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA;AAAA;AAAA;AAAA,EAKF;AAAA,EACA,sBAAsB;AAAA,IACpB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;AAAA,EAEF;AAAA,EACA,kBAAkB;AAAA,IAChB;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAMF;AAEA,SAAS,aAAa;AACpB,QAAM,IAAI,MAAM,kCAAkC;AACpD;AAEO,SAAS,UAAU,MAAM,MAAM,CAAC,GAAG;AACxC,WAAS,CAAC,MAAM,OAAO,KAAK,OAAO,QAAQ,IAAI,GAAG;AAChD,WAAO,KAAK,MAAM,GAAG;AACrB,UAAM,MAAM,KAAK,OAAO,CAAC,GAAG,MAAM,EAAE,CAAC,GAAG,MAAM;AAC9C,UAAM,KAAK,KAAK,OAAO,CAAC,GAAG,MAAM,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG;AACjD,aAAS,QAAQ,SAAS;AACxB,YAAM,OAAO,OAAO,yBAAyB,KAAK,IAAI;AACtD,WAAK,QAAQ,KAAK,QAAQ,aAAa,KAAK,MAAM,KAAK,MAAM;AAC7D,aAAO,eAAe,KAAK,MAAM,IAAI;AACrC,aAAO,eAAe,IAAI,MAAM,IAAI;AAAA,IACtC;AAAA,EACF;AACF;;;AClFA,uBAAuB,MAAM;AAC7B,uBAAuB,MAAM;AAC7B,uBAAuB,OAAO;AAG9B,qBAAqB;AAGrB,UAAU,qBAAqB,OAAO,eAAe,CAAC,CAAC;",
  "names": []
}

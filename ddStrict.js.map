{
  "version": 3,
  "sources": ["src/dd/strict_deprecation.js", "src/dd/ddStrict.js"],
  "sourcesContent": ["export function noPrimitiveConstructor(OG, name = OG.name) {\n  Object.defineProperty(window, name, {\n    value: function PrimitiveConstructor(...args) {\n      if (new.target)\n        throw new Error(`Replace \"new ${name}(...\" with \"${name}(...\".`);\n      return OG(...args);\n    },\n    enumerable: true, writable: true, configurable: true\n  });\n}\n\nexport function ShadowRootAlwaysOpen() {\n  const OG = HTMLElement.prototype.attachShadow;\n  HTMLElement.prototype.attachShadow = function attachShadowAlwaysOpen(opt = {}, ...args) {\n    opt.mode = \"open\";\n    return OG.call(this, opt, ...args);\n  };\n}\n\nexport const DoubleDotStrictMask = {\n  \"Element.prototype\": [\n    \"after\",\n    \"before\",\n    \"hasAttributeNS\",\n    \"getAttributeNS\",\n    \"setAttributeNS\",\n    \"removeAttributeNS\",\n    \"setAttributeNode\",\n    \"removeAttributeNode\",\n    \"getAttributeNodeNS\",\n    \"setAttributeNodeNS\",\n    //     \"outerHTML\"\n\n    //.setAttribute(name, value)\n    //.hasAttribute(name)\n    //.getAttribute(name)\n    //.getAttributeNode(name)\n    //.attributes\n  ],\n  \"Event.prototype\": [\n    \"stopPropagation\",\n    \"stopImmediatePropagation\"\n  ],\n  \"EventTarget.prototype\": [\n    \"addEventListener\",\n    \"removeEventListener\",\n    //.dispatchEvent\n  ],\n  \"window\": [\n    \"setTimeout\",\n    \"clearTimeout\",\n    \"setInterval\",\n    \"clearInterval\",\n    \"event\"\n    //must add \"async sleep(ms)\" first\n    //MutationObserver\n    //ResizeObserver\n    //IntersectionObserver\n  ],\n  \"Document.prototype\": [\n    \"createAttribute\",\n    \"createComment\",\n    \"createDocumentFragment\",\n    \"createElement\",\n    \"createTextNode\",\n    \"importNode\",\n    \"currentScript\",\n    \"write\",\n    // \"createRange\" //todo research\n  ],\n  \"Node.prototype\": [\n    \"cloneNode\"\n  ],\n  /*\n  \"HTMLElement.prototype\": {\n    adoptionCallback: problematicDeprecationMethod, needs to highJack the HTMLElement constructor actually.\n  }\n  */\n};\n\nfunction deprecated() {\n  throw new Error(\"Deprecated in DoubleDots strict.\");\n}\n\nexport function deprecate(mask, OGs = {}) {\n  for (let [path, methods] of Object.entries(mask)) {\n    path = path.split(\".\");\n    const obj = path.reduce((o, p) => o[p], window);\n    const OG = path.reduce((o, p) => o[p] ??= {}, OGs);\n    for (let prop of methods) {\n      const desc = Object.getOwnPropertyDescriptor(obj, prop);\n      desc.value ? desc.value = deprecated : desc.get = desc.get = deprecated;\n      Object.defineProperty(obj, prop, desc);\n      Object.defineProperty(OG, prop, desc);\n    }\n  }\n}\n", "import {\n  noPrimitiveConstructor,\n  ShadowRootAlwaysOpen,\n  DoubleDotStrictMask,\n  deprecate\n} from \"./strict_deprecation.js\";\n\n//DoubleDots doesn't treat objects made using new as primitives.\n//You can remove this restriction if you have a 3rd party library that\n//use such objects, and these libraries will still work ok.\n//But if you make stuff from scratch, \n//stay away from \"new String/Number/Boolean()\".\nnoPrimitiveConstructor(String);\nnoPrimitiveConstructor(Number);\nnoPrimitiveConstructor(Boolean);\n\n//DoubleDots MUST access full .composedPath for all events.\nShadowRootAlwaysOpen();\n\n//Deprecate lots of the native methods\ndeprecate(DoubleDotStrictMask, window.DoubleDots ??= {});"],
  "mappings": "MAAO,SAASA,EAAuBC,EAAIC,EAAOD,EAAG,KAAM,CACzD,OAAO,eAAe,OAAQC,EAAM,CAClC,MAAO,YAAiCC,EAAM,CAC5C,GAAI,WACF,MAAM,IAAI,MAAM,gBAAgBD,gBAAmBA,SAAY,EACjE,OAAOD,EAAG,GAAGE,CAAI,CACnB,EACA,WAAY,GAAM,SAAU,GAAM,aAAc,EAClD,CAAC,CACH,CAEO,SAASC,GAAuB,CACrC,IAAMH,EAAK,YAAY,UAAU,aACjC,YAAY,UAAU,aAAe,SAAgCI,EAAM,CAAC,KAAMF,EAAM,CACtF,OAAAE,EAAI,KAAO,OACJJ,EAAG,KAAK,KAAMI,EAAK,GAAGF,CAAI,CACnC,CACF,CAEO,IAAMG,EAAsB,CACjC,oBAAqB,CACnB,QACA,SACA,iBACA,iBACA,iBACA,oBACA,mBACA,sBACA,qBACA,oBAQF,EACA,kBAAmB,CACjB,kBACA,0BACF,EACA,wBAAyB,CACvB,mBACA,qBAEF,EACA,OAAU,CACR,aACA,eACA,cACA,gBACA,OAKF,EACA,qBAAsB,CACpB,kBACA,gBACA,yBACA,gBACA,iBACA,aACA,gBACA,OAEF,EACA,iBAAkB,CAChB,WACF,CAMF,EAEA,SAASC,GAAa,CACpB,MAAM,IAAI,MAAM,kCAAkC,CACpD,CAEO,SAASC,EAAUC,EAAMC,EAAM,CAAC,EAAG,CACxC,OAAS,CAACC,EAAMC,CAAO,IAAK,OAAO,QAAQH,CAAI,EAAG,CAChDE,EAAOA,EAAK,MAAM,GAAG,EACrB,IAAME,EAAMF,EAAK,OAAO,CAACG,EAAGC,IAAMD,EAAEC,CAAC,EAAG,MAAM,EACxCd,EAAKU,EAAK,OAAO,CAACG,EAAGC,IAAG,CAxFlC,IAAAC,EAwFqC,OAAAA,EAAAF,EAAAC,KAAA,KAAAC,EAAAF,EAAAC,GAAS,CAAC,GAAGL,CAAG,EACjD,QAASO,KAAQL,EAAS,CACxB,IAAMM,EAAO,OAAO,yBAAyBL,EAAKI,CAAI,EACtDC,EAAK,MAAQA,EAAK,MAAQX,EAAaW,EAAK,IAAMA,EAAK,IAAMX,EAC7D,OAAO,eAAeM,EAAKI,EAAMC,CAAI,EACrC,OAAO,eAAejB,EAAIgB,EAAMC,CAAI,GAG1C,CCpFAC,EAAuB,MAAM,EAC7BA,EAAuB,MAAM,EAC7BA,EAAuB,OAAO,EAG9BC,EAAqB,EAjBrB,IAAAC,EAoBAC,EAAUC,GAAqBF,EAAA,OAAO,aAAP,KAAAA,EAAA,OAAO,WAAe,CAAC,CAAC",
  "names": ["noPrimitiveConstructor", "OG", "name", "args", "ShadowRootAlwaysOpen", "opt", "DoubleDotStrictMask", "deprecated", "deprecate", "mask", "OGs", "path", "methods", "obj", "o", "p", "_a", "prop", "desc", "noPrimitiveConstructor", "ShadowRootAlwaysOpen", "_a", "deprecate", "DoubleDotStrictMask"]
}

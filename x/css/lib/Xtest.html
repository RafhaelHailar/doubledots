<script type="module">
  import { interpretClass } from "./Xinterpreter.js";
  import { toCssText } from "./Xparser.js";

  const units = {
    "$flex(row-reverse, p(1%,,3%), gap(,3rem))":
`/*container 0*/
/*$flex(row-reverse, p(1%,,3%), gap(,3rem))*/
:where(.\\$flex\\(row-reverse\\,\\ p\\(1\\%\\,\\,3\\%\\)\\,\\ gap\\(\\,3rem\\)\\)) {
  flex-direction: row-reverse;
  padding-top: 1%;
  padding-bottom: 3%;
  padding-block-start: 1%;
  padding-block-end: 3%;
  gap-row: 3rem;
}`,
"$border(w(,1px,2px), s(,,solid,dashed))":
`/*container 0*/
/*$border(w(,1px,2px), s(,,solid,dashed))*/
:where(.\\$border\\(w\\(\\,1px\\,2px\\)\\,\\ s\\(\\,\\,solid\\,dashed\\)\\)) {
  border-right-width: 1px;
  border-bottom-width: 2px;
  border-left-width: 1px;
  border-block-end-width: 2px;
  border-inline-start-width: 1px;
  border-inline-end-width: 1px;
  border-right-style: dashed;
  border-bottom-style: solid;
  border-block-end-style: solid;
  border-inline-end-style: dashed;
}`
  };
  for (let [expr, expect] of Object.entries(units)) {
    const res = interpretClass(expr);
    const resTxt = [...toCssText(expr, res)].join("\n");
    if (resTxt != expect) {
      console.log(res);
      console.log("------------------------");
      console.log(JSON.stringify(resTxt));
      console.log("------------------------");
      console.log(expect);
    } else {
      console.log("OK", expr);
    }
  }

</script>
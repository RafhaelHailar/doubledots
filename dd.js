(()=>{var Le=Object.defineProperty;var Te=(s,e,t)=>e in s?Le(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var j=(s,e,t)=>(Te(s,typeof e!="symbol"?e+"":e,t),t),he=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var o=(s,e,t)=>(he(s,e,"read from private field"),t?t.call(s):e.get(s)),f=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},v=(s,e,t,n)=>(he(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),ue=(s,e,t,n)=>({set _(r){v(s,e,r,t)},get _(){return o(s,e,n)}}),y=(s,e,t)=>(he(s,e,"access private method"),t);var je=document.createElement,De=EventTarget.prototype.addEventListener,ke=setInterval,xe=setTimeout;async function Ce(s){return await new Promise(e=>xe(e,s))}function Pe(s){let e=je.call(document,"audio");De.call(e,"ratechange",s),e.playbackRate=2}var H,A,L=class extends Set{static gc(){let e,t;for(let n of o(L,H))if(t=n.deref())for(let r of t)r.isConnected?e=!0:(t.delete(r),r.remove());else o(L,H).delete(n);!e&&v(L,A,clearInterval(o(L,A)))}constructor(...e){super(...e),o(L,H).add(new WeakRef(this))}add(e){var t;(t=o(L,A))!=null||v(L,A,ke(L.gc,L.GC)),super.add(e)}},S=L;H=new WeakMap,A=new WeakMap,f(S,H,new Set),f(S,A,void 0),j(S,"GC",1e4);var _e=function(){function s(l){return Object.keys(l).filter(d=>d.startsWith("on")).map(d=>d.substring(2).toLowerCase())}let e=s(Element.prototype),t=s(HTMLElement.prototype),n=s(window),r=s(Document.prototype),c=[...e,...t].filter((l,d,m)=>m.indexOf(l)===d),g=n.filter(l=>!c.includes(l)),O=r.filter(l=>!c.includes(l)&&!g.includes(l)),h={element:c,window:g,document:O};return h.element.push("touchstart","touchmove","touchend","touchcancel"),h.document.push("DOMContentLoaded"),Object.values(h).forEach(Object.freeze),Object.freeze(h),h}();function Me(s){return s.replace(/-[a-z]/g,e=>e[1].toUpperCase())}function Se(s){return s.replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}function He(s){return s.replace(/^(_*)([A-Z])/,(e,t,n)=>t+n.toLowerCase())}async function Ae(s){s="export default "+s.trim();let e=new Blob([s],{type:"application/javascript"}),t=URL.createObjectURL(e),n=await import(t);return URL.revokeObjectURL(t),n.default}function $e(s){let[e,...t]=s.split("_");for(let n=0;n<=t.length-1;n+=2){let r=t[n].replaceAll("..","\\:"),c=n<=t.length?`$="${t[n+1]}"`:"";e+=`[${r}${c}]`}return e}function*Ne(s,e="*"){for(let t=s.parentElement;t;t=t.parentElement)(e==="*"||t.matches(e))&&(yield t)}function*Be(s,e="*"){for(let t=s.previousElementSibling;t;t=t.previousElementSibling)(e==="*"||t.matches(e))&&(yield t)}function*Ge(s,e="*"){for(let t=s.nextElementSibling;t;t=t.nextElementSibling)(e==="*"||t.matches(e))&&(yield t)}function*Ie(s){var e;for(let t=s.getRootNode();t;t=(e=t.host)==null?void 0:e.getRootNode())yield t}function*Ue(s,e="*"){for(let t=s.getRootNode().host;t;t=t.getRootNode().host)(e==="*"||t.matches(e))&&(yield t)}function*ze(s,e="*"){for(let t,n=[...s.children];t=n.shift();n.push(...s.children))(e==="*"||t.matches(e))&&(yield t)}var C=class extends Error{constructor(e,t){super(e)}},W=class extends C{constructor(e){super("arrow function with `this`.")}static check(e){let t=e.toString();if(/^(async\s+|)(\(|[^([]+=)/.test(t)&&(t=t.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,""),t=t.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,""),t=t.replace(/(`)(?:(?=(\\?))\2.)*?\1/g,""),/\bthis\b/.test(t)))throw new W(e)}};window.DoubleDots={nativeMethods:{},DoubleDotsError:C,ThisArrowFunctionError:W,DeprecationError:class extends C{},MissingReaction:class extends C{},DisconnectedError:class extends C{},TriggerUpgradeError:class extends C{constructor(e,t){super(e)}},AttrWeakSet:S,nextTick:Pe,sleep:Ce,nativeEvents:_e,kebabToPascal:Me,pascalToKebab:Se,pascalToCamel:He,up:Ne,left:Be,right:Ge,roots:Ie,hosts:Ue,downwide:ze,importBasedEval:Ae,miniQuerySelector:$e};var J,le,$=class extends Attr{get trigger(){var e;return y(e=$,J,le).call(e,this),this.trigger}get reactions(){var e;return y(e=$,J,le).call(e,this),this.reactions}isConnected(){return this.ownerElement.isConnected()}getRootNode(...e){var t;return(t=this.ownerElement)==null?void 0:t.getRootNode(...e)}remove(){return this.ownerElement.removeAttribute(this.name)}dispatchEvent(e){if(!this.isConnected)throw new DoubleDots.ReactionError("dispatch on disconnected attribute.");eventLoop.dispatch(e,this)}static upgradeBranch(...e){for(let t of e)if(t instanceof Element)this.upgradeElementRoot(t);else if(t instanceof DocumentFragment)for(let n of t.children)this.upgradeElementRoot(n)}static upgradeElementRoot(e){for(let t of e.attributes)t.name.includes(":")&&$.upgrade(t);for(let t of e.children)this.upgradeElementRoot(t)}static upgrade(e,t){var n;if(t!=null||(t=e.ownerElement.getRootNode().Triggers.get(e.name.split(":")[0],e)),t instanceof Error)throw t;if(t instanceof Promise){Object.setPrototypeOf(e,F.prototype),t.then(r=>$.upgrade(e,r));return}try{Object.setPrototypeOf(e,t.prototype),(n=e.upgrade)==null||n.call(e),e.value&&(e.value=e.value)}catch(r){throw new DoubleDots.TriggerUpgradeError(t.name+".upgrade() caused an error. Triggers shouldn't cause errors.")}}},D=$;J=new WeakSet,le=function(e){let[t,...n]=e.name.split(":");n.length===1&&!n[0]&&n.pop(),Object.defineProperties(e,{trigger:{value:t,enumerable:!0},reactions:{value:n,enumerable:!0}})},f(D,J);var de=class extends D{remove(){}},F=class extends D{},We=Event.prototype.stopImmediatePropagation,Je=EventTarget.prototype.addEventListener,Ze=EventTarget.prototype.removeEventListener,q={};Object.defineProperty(Event,"activeListeners",{enumerable:!0,value:function(e){return q[e]}});var ee=class extends D{upgrade(){Object.defineProperty(this,"__l",{value:this.run.bind(this)}),Je.call(this.target,this.type,this.__l,this.options),q[this.type]=(q[this.type]||0)+1}remove(){q[this.type]-=1,Ze(this.target,this.type,this.__l,this.options),super.remove()}get target(){return this.ownerElement}get type(){return this.trigger}run(e){eventLoop.dispatch(e,this)}},pe=class extends ee{get register(){var t,n;let e=this.target.triggers;return e||Object.defineProperty(this.target,"triggers",{value:e={}}),(n=e[t=this.trigger])!=null?n:e[t]=DoubleDots.AttrWeakSet()}get target(){return window}upgrade(){super.upgrade(),this.register.add(this)}remove(){this.register.delete(this),super.remove()}run(e){We.call(e),eventLoop.dispatchBatch(e,this.register)}},fe=class extends D{upgrade(){let e=new MutationObserver(this.run.bind(this));Object.defineProperty(this,"observer",{value:e}),this.observer.observe(this.target,this.settings)}remove(){this.observer.disconnect(),super.remove()}get target(){return this.ownerElement}get settings(){return{attributes:!0,attributesOldValue:!0}}run(e){for(let t of e)eventLoop.dispatch(t,this)}},ge=class extends D{upgrade(){let e=new ResizeObserver(this.run.bind(this));Object.defineProperty(this,"observer",{value:e}),this.observer.observe(this.ownerElement,this.settings)}remove(){this.observer.disconnect(),super.remove()}get settings(){return{box:this.trigger}}run(e){eventLoop.dispatch(e,this)}},me=class extends D{upgrade(){let e=new IntersectionObserver(this.run.bind(this));Object.defineProperty(this,"observer",{value:e}),this.observer.observe(this.ownerElement,this.settings)}stop(){this.observer.disconnect()}remove(){this.stop(),super.remove()}run([e]){document.readyState==="complete"&&eventLoop.dispatch(e,this)}};Object.assign(window,{AttrListener:ee,AttrListenerGlobal:pe,AttrCustom:D,AttrImmutable:de,AttrUnknown:F,AttrMutation:fe,AttrIntersection:me,AttrResize:ge});var R=class extends DoubleDots.DoubleDotsError{constructor(e,t,n,r){super(e),this.fullname=t,this.rule=n,this.RuleFun=r}},_=class extends R{constructor(e){super(`Trigger name/prefix must begin with english letter or '_'.
${e} begins with '${e[0]}'.`)}static check(e){if(!e.match(/[a-z_].*/))throw new _(e)}},M=class extends R{constructor(e){super(`DoubleDots definition names and rule prefixes can only contain /^[a-z0-9_.-]*$/: ${e}`)}static check(e){if(!e.match(/^[a-z0-9_\.-]*$/))throw new M(e)}},P=class extends R{constructor(e,t,n,r){super(e,t,n,r),document.documentElement.dispatchEvent(new ErrorEvent(this))}};Object.assign(DoubleDots,{DefinitionError:R,TriggerNameError:_,DefinitionNameError:M,AsyncDefinitionError:P});var E,k,re,we,oe,ve,te=class{constructor(){f(this,re);f(this,oe);f(this,E,{});f(this,k,{})}defineRule(e,t){M.check(e);for(let n of Object.keys(o(this,k)))if(n.startsWith(e)||e.startsWith(n))throw new R(`rule/rule conflict: trying to add '${e}' when '${n}' exists.`);for(let n of Object.keys(o(this,E)))if(n.startsWith(e))throw new R(`rule/name conflict: trying to add '${e}' when '${n}' exists.`);o(this,k)[e]=t,t instanceof Promise&&t.then(n=>o(this,k)[e]=n).catch(n=>o(this,k)[e]=new P(n,null,e))}define(e,t){if(M.check(e),e in o(this,E))throw new R(`name/name conflict: '${e}' already exists.`);for(let n of Object.keys(o(this,k)))if(e.startsWith(n))throw new R(`name/rule conflict: trying to add '${e}' when rule '${n}' exists.`);o(this,E)[e]=t,t instanceof Promise&&t.then(n=>o(this,E)[e]=n).catch(n=>o(this,E)[e]=new P(n,e))}get(e){return o(this,E)[e]||y(this,oe,ve).call(this,e)}};E=new WeakMap,k=new WeakMap,re=new WeakSet,we=function(e,t,n){if(n instanceof Promise)return o(this,E)[e]=n.then(r=>(n=r)(e)).catch(r=>new P(r,null,t,null)).then(r=>o(this,E)[e]=r).catch(r=>o(this,E)[e]=new P(r,e,t,n));try{if(n instanceof Error)throw n;let r=o(this,E)[e]=n(e);return r instanceof Promise&&r.then(c=>o(this,E)[e]=c).catch(c=>o(this,E)[e]=new P(c,e,t,n)),r}catch(r){return o(this,E)[e]=new R(r,e,t,n)}},oe=new WeakSet,ve=function(e){for(let[t,n]of Object.entries(o(this,k)))if(e.startsWith(t))return y(this,re,we).call(this,e,t,n)};var I=class extends Promise{static make(e){let t,n,r=new I((c,g)=>{t=c,n=g});return Object.assign(r,{resolve:t,reject:n,attr:e})}},N,ie,ye,be=class{constructor(){f(this,ie);j(this,"unknowns",{});f(this,N,void 0)}make(e,t){var r,c;let n=I.make(t);return((c=(r=this.unknowns)[e])!=null?c:r[e]=[]).push(n),n.catch(g=>this.remove(e,n)),o(this,N)||y(this,ie,ye).call(this),n}remove(e,t){let n=this.unknowns[e];if(!n)return;let r=n.indexOf(t);r<0||(n.splice(r,1),!n.length&&delete this.unknowns[e])}complete(e){let t=this.unknowns[e];delete this.unknowns[e];for(let n of t||[])try{n.resolve()}catch(r){}}completeRule(e){for(let t in this.unknowns)t.startsWith(e)&&this.complete(t)}};N=new WeakMap,ie=new WeakSet,ye=async function(){for(v(this,N,!0);;){await new Promise(t=>setTimeout(t,1e4));let e=Object.entries(this.unknowns);if(!e.length)return v(this,N,!1);for(let[t,n]of e)for(let r of n.filter(c=>!c.attr.isConnected))this.remove(t,r)}};var B,U=class extends te{constructor(){super(...arguments);f(this,B,new be)}define(t,n){super.define(t,n),o(this,B).complete(t)}defineRule(t,n){super.defineRule(t,n),o(this,B).completeRule(t)}get(t,n){var r;return(r=super.get(t))!=null?r:o(this,B).make(t,n)}};B=new WeakMap;var G,ne=class extends U{constructor(){super(...arguments);f(this,G,void 0)}defineRule(t,n){if(o(this,G))throw new R("ShadowRoot too-late definition error for rule: "+t);return super.defineRule(t,n)}define(t,n){if(o(this,G))throw new R("ShadowRoot too-late definition error for definition: "+t);return super.define(t,n)}get(t){return v(this,G,!0),super.get(t)}};G=new WeakMap;var K,V,se=class extends ne{constructor(t,n){super();f(this,K,void 0);f(this,V,void 0);v(this,K,t),v(this,V,n)}get root(){return o(this,K)}get type(){return o(this,V)}get parentMap(){var t,n;return(n=(t=this.root.host)==null?void 0:t.getRootNode())==null?void 0:n[this.type]}get(t){return super.get(t)||this.parentMap.get(t)}};K=new WeakMap,V=new WeakMap;var ce,ae,Z=class extends se{constructor(){super(...arguments);f(this,ce,{});f(this,ae,void 0)}get rule(){var t;return(t=o(this,ae))!=null?t:v(this,ae,`^(${this.root.host.getAttribute("override-"+this.type.toLowercase())})`)}overrides(t){var n,r,c,g;return(g=(c=o(this,ce))[t])!=null?g:c[t]=((r=(n=this.parentMap)==null?void 0:n.overrides)==null?void 0:r.call(n,t))||this.rule.matches(t)&&this.parentMap}get(t){let n=this.overrides(t);return n?n.get(t):super.get(t)}};ce=new WeakMap,ae=new WeakMap;function Ee(s){return class extends s{defineRule(t,n){_.check(t),super.defineRule(t,n)}define(t,n){_.check(t),super.define(t,n)}}}Object.defineProperties(Document.prototype,{Reactions:{get:function(){let s=new U;return Object.defineProperty(this,"Reactions",{value:s,enumerable:!0}),s}},Triggers:{configurable:!0,get:function(){let s=Ee(U),e=new s;return Object.defineProperty(this,"Triggers",{value:e,enumerable:!0}),e}}});Object.defineProperties(ShadowRoot.prototype,{Reactions:{configurable:!0,get:function(){let s=new Z(this,"Reactions");return Object.defineProperty(this,"Reactions",{value:s,enumerable:!0}),s}},Triggers:{configurable:!0,get:function(){let s=Ee(Z),e=new s(this,"Triggers");return Object.defineProperty(this,"Triggers",{value:e,enumerable:!0}),e}}});var z=class{constructor(e,t,n){this.url=e,this.name=t,this.fullname=DoubleDots.pascalToKebab(DoubleDots.pascalToCamel(t)),this.value=n||"",this.type=/^_*[A-Z]/.test(t)?"Triggers":"Reactions",this.rule=/[\._-]$/.test(t)?"defineRule":"define"}async getDefinition(){let e=await import(this.url);if(!e||typeof e!="object"&&!(e instanceof Object))throw new TypeError(`URL is not an es6 module: ${this.url}`);let t=this.value||this.name,n=e[t];if(n)return n;for(let[r,c]of Object.entries(e))if(r.startsWith("dynamic")&&c[t])return c[t];throw new TypeError(`ES6 module doesn't contain resource: ${t}`)}static*parse(e){var r,c;let t=(e.hash||e.search).slice(1);if(!t)throw DoubleDots.SyntaxError("DoubleDots.Reference not in url: "+e);let n=(c=(r=t.entries)==null?void 0:r.call(t))!=null?c:t.split("&").map(g=>g.split("="));for(let[g,O]of n)yield new z(e,g,O)}};async function Ke(s,e){for(let t of z.parse(s))e[t.type][t.rule](t.fullname,t.getDefinition())}Object.assign(DoubleDots,{DefinitionsMap:te,DefinitionsMapLock:ne,DefinitionsMapDOM:se,DefinitionsMapDOMOverride:Z,UnknownDefinitionsMap:U,UnknownDefinition:I,Reference:z,define:Ke});(function(){var r,c,g,O,h,Y,d,Q,u,p,w;let s=HTMLElement.prototype.attachShadow;HTMLElement.prototype.attachShadow=function(...i){var a;return((a=i[0])!=null?a:i[0]={}).mode="open",s.apply(this,i)},Event.data=Symbol("Event data");class e extends DoubleDots.DoubleDotsError{}DoubleDots.EventLoopError=e;class t{constructor(i,a){f(this,h);f(this,d);f(this,r,0);f(this,c,void 0);f(this,g,void 0);f(this,O,void 0);var b;this.at=a,this.event=i,v(this,c,this.at.reactions),v(this,g,[(b=i[Event.data])!=null?b:i]),v(this,O,[])}isConnected(){return this.at.isConnected()}getReaction(){return o(this,r)<o(this,c).length?o(this,c)[o(this,r)]:void 0}getReactionIndex(){return o(this,r)<o(this,c).length?o(this,r):-1}nextReaction(){return this.getReaction()}run(i=!1){for(let a=this.getReaction();a!==void 0;a=this.nextReaction()){if(a===""){i=!0,y(this,d,Q).call(this,o(this,g)[o(this,r)]);continue}if(!a.startsWith("catch"))try{if(!this.at.isConnected)throw new e("Disconnected: "+this.at);let b=this.at.getRootNode().Reactions.get(a,this.at);if(b instanceof Error)throw b;if(b instanceof Promise)if(i){b.then(T=>__eventLoop.asyncContinue(this));return}else return b instanceof DoubleDots.UnknownDefinition?y(this,h,Y).call(this,new e("Reaction not found: "+a)):(b.then(T=>__eventLoop.syncContinue()),this);let X=o(this,O)[o(this,r)]=b.apply(this.at,o(this,g).slice().reverse());if(X instanceof Promise)if(i){X.then(T=>y(this,d,Q).call(this,T)).catch(T=>y(this,h,Y).call(this,T)).finally(T=>__eventLoop.asyncContinue(this));return}else return X.then(T=>y(this,d,Q).call(this,T)).catch(T=>y(this,h,Y).call(this,T)).finally(T=>__eventLoop.syncContinue()),this;y(this,d,Q).call(this,X)}catch(b){y(this,h,Y).call(this,b)}}}}r=new WeakMap,c=new WeakMap,g=new WeakMap,O=new WeakMap,h=new WeakSet,Y=function(i){console.error(i),o(this,O)[o(this,r)]=i;let a="catch_"+i.constructor.name.replace(/[A-Z]/g,"-$&").toLowerCase();for(ue(this,r)._++;o(this,r)<o(this,c).length;ue(this,r)._++)if(o(this,c)[o(this,r)]==="catch"||o(this,c)[o(this,r)]===a)return;(this.at.isConnected?this.at.ownerElement:document.documentElement).dispatchEvent(new ErrorEvent("error",{error:i}))},d=new WeakSet,Q=function(i){if(o(this,O)[o(this,r)]=i,i===EventLoop.Break)v(this,r,o(this,c).length);else if(i instanceof EventLoop.ReactionJump){let a=o(this,r)+i.value;o(this,g)[a]=o(this,g)[o(this,r)],v(this,r,a)}else{let a=o(this,r)+1;o(this,g)[a]=i,v(this,r,a)}};class n{constructor(){f(this,u,[]);f(this,p,[]);j(this,"task")}syncContinue(){(this.task=this.task.run())||this.loop()}asyncContinue(i){(this.task=i).run(!0)}loop(){for(;o(this,u)[0];){let{event:i,iterator:a}=o(this,u)[0];for(let b of a)if(this.task=new t(i,b),o(this,p).push(this.task),this.task=this.task.run())return;o(this,u).shift()}}batch(i,a){let b=a[Symbol.iterator]();o(this,u).push({event:i,iterator:b})===1&&this.loop()}}u=new WeakMap,p=new WeakMap,__eventLoop=new n,window.EventLoop=(w=class{get event(){var i;return(i=__eventLoop.task)==null?void 0:i.event}get attribute(){var i;return(i=__eventLoop.task)==null?void 0:i.at}get reaction(){var i;return(i=__eventLoop.task)==null?void 0:i.getReaction()}get reactionIndex(){var i;return(i=__eventLoop.task)==null?void 0:i.getReactionIndex()}dispatch(i,a){__eventLoop.batch(i,[a])}dispatchBatch(i,a){__eventLoop.batch(i,a)}},j(w,"ReactionJump",class{constructor(a){if(a=parseInt(a),!a||isNaN(a))throw new DoubleDotsErrorEvent("ReactionJump must be done using a positive or negative integer.");this.value=a}}),j(w,"Break",{}),j(w,"ReactionOrigin",class{constructor(a){if(!a||!(a instanceof Object))throw new DoubleDotsErrorEvent("ReactionOrigin must be an object not null.");this.value=a}}),j(w,"SpreadReaction",function(i){return function(b){return b instanceof Iterable?i.call(this,...b):i.call(this,b)}}),w),Object.defineProperty(window,"eventLoop",{value:new EventLoop})})();var Ve={cloneNode:[Node.prototype,DocumentFragment.prototype],innerHTML:[Element.prototype,HTMLTemplateElement.prototype],insertAdjacentHTML:[Element.prototype,HTMLTemplateElement.prototype]};for(let[s,[e,t]]of Object.entries(Ve))Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s));function Oe(s,e,t){let n=Object.getOwnPropertyDescriptor(s,e);n.set=t,Object.defineProperty(s,e,n)}function Re(s,e,t){let n=Object.getOwnPropertyDescriptor(s,e);n.value=t,Object.defineProperty(s,e,n)}(function(s,e){let t=Object.getOwnPropertyDescriptor(s,"innerHTML").set,n=function(u){t.call(this,u),AttrCustom.upgradeBranch(...this.children)},r=Object.getOwnPropertyDescriptor(e,"innerHTML").set,c=function(u){r.call(this,u),AttrCustom.upgradeBranch(...this.children)},g=s.insertAdjacentHTML;function O(m,...u){let p,w;m==="afterbegin"?(p=this,w=0):m==="beforeend"?(p=this,w=this.children.length):m==="beforebegin"?(p=this.parentNode,w=Array.prototype.indexOf.call(p.children,this)):m==="afterend"&&(p=this.parentNode,w=Array.prototype.indexOf.call(p.children,this)+1);let x=p.children.length;g.call(this,m,...u);let i=p.children.length-x,a=Array.from(p.children).slice(w,w+i);AttrCustom.upgradeBranch(...a)}let h=s.setAttribute,l=s.getAttributeNode;function d(m,u){if(m.startsWith("override-"))throw new SyntaxError("You can only set [override-xyz] attributes on elements in HTML template: "+m);if(!m.includes(":"))return h.call(this,m,u);let p=l.call(this,m);if(p){p.value!==u&&(p.value=u);return}h.call(this,m,u),p=l.call(this,m),AttrCustom.upgrade(p)}Oe(s,"innerHTML",n),Oe(e,"innerHTML",c),Re(s,"insertAdjacentHTML",O),Re(s,"setAttribute",d)})(Element.prototype,ShadowRoot.prototype);(function(){function s(h,l,d=h.getRootNode(),m=l==null?void 0:l.getRootNode()){if(!(l instanceof Element)||m===d||m instanceof DocumentFragment&&d instanceof DocumentFragment)return!1;if(h.isConnected&&m instanceof DocumentFragment)return!0;throw new DoubleDots.InsertElementFromJSError(h,l)}let e=[];function t(h){return s(this,h)?[h]:e}function n(h,l){return s(this,l)?[l]:e}function r(...h){let l=this.getRootNode();return h.filter(d=>s(this,d,l))}let c={"Element.prototype":{appendChild:t,insertBefore:t,append:r,prepend:r,insertAdjacentElement:n},"Document.prototype":{appendChild:t,insertBefore:t,append:r,prepend:r},"DocumentFragment.prototype":{appendChild:t,insertBefore:t,append:r,prepend:r}};function g(h,l,d){Object.defineProperty(h,l,{...Object.getOwnPropertyDescriptor(h,l),value:d})}function O(h,l){return function(...d){let m=l.call(this,...d),u=h.apply(this,d);return m.length&&AttrCustom.upgradeBranch(...m),u}}for(let[h,l]of Object.entries(c)){h=h.split(".");let d=h.reduce((u,p)=>u[p],window),m=h.reduce((u,p)=>{var w;return(w=u[p])!=null?w:u[p]={}},DoubleDots.nativeMethods);for(let[u,p]of Object.entries(l)){let w=m[u]=d[u],x=O(w,p);g(d,u,x)}}})();(function(){function s(){let t=this.ownerElement.getAttribute("src"),n=t?new URL(t,location):location;DoubleDots.define(new URL(this.value,n),this.ownerDocument)}class e extends AttrCustom{upgrade(){eventLoop.dispatch(new Event(this.trigger),this)}}document.Reactions.define("define",s),document.Triggers.define("_",e)})();(function(){let s=new WeakMap;class e extends AttrCustom{upgrade(){let c=document.createElement("template");c.innerHTML=this.ownerElement.innerHTML,s.set(this.ownerElement,c.content),this.ownerElement.textContent=""}}class t extends AttrCustom{upgrade(){let c=document.createDocumentFragment();c.append(...this.ownerElement.childNodes),s.set(this.ownerElement,c),this.ownerElement.textContent=""}}function n(){return s.get(this.ownerElement)}document.Triggers.define("_t",e),document.Triggers.define("_tt",t),document.Reactions.define("_t",n)})();(function(s){if(document.readyState!=="loading")return AttrCustom.upgradeBranch(document.htmlElement);s.call(document,"DOMContentLoaded",e=>AttrCustom.upgradeBranch(document.documentElement))})(EventTarget.prototype.addEventListener);})();
//# sourceMappingURL=dd.js.map
